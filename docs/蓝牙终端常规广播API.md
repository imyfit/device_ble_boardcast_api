# 蓝牙终端常规广播API

|    日期    | 备注                                                         |
| :--------: | :----------------------------------------------------------- |
| 2025-09-10 | - 日常广播数据新增 体表温度、环境温度、体核温度、气压、GNSS数据 |
| 2025-10-17 | - 日常广播数据新增 计步、卡路里、里程、HRV数据               |

1. 本协议文档（PDF版本时）可能不是最新版本；
2. 本协议文档描述，蓝牙终端常规广播API ；
3. 开发者若需要硬件对接请联系销售人员,  https://www.imyfit.com ；

​	

## 概述

终端广播有2种类型：可连接的广播、不可连接的广播。部分终端不一定完全满足两种类型，但至少满足可连接的广播。当终端处于未连接状态时，将广播可连接的广播数据，当手环已经被连接后，将会广播不可连接的广播数据。 

- 可连接的广播：包含 UUID 、终端名称、终端类型、终端型号、终端MAC 地址和用户自定义数据（其中UUID、用户自定义数据在广播数据中；终端类型、终端型号、MAC地址在扫描响应数据中）。

- 不可连接的广播：包含 MAC 地址、用户自定义数据域（包含在广播数据中）。

蓝牙标准广播数据格式，一般采用三段式：数据长度（len）+数据类型（type）+值（value），常见的数据类型如下表，更完整的数据类型请到蓝牙联盟官网查阅相关文档。

| 数据类型（type） | 说明             |
| :--------------: | ---------------- |
|       0x01       | 广播类型标志位   |
|       0x03       | 16位服务类别UUID |
|       0x09       | 完整的本地名称   |
|       0xFF       | 自定义数据       |

​	

自定义数据的**实体**位于蓝牙标准广播中数据类型为0xFF 的后面，采用包类编号PackageID+包数据Data组包，如下表所示。

| 包类编号（PackageID） | 包数据（Data）                          |
| :-------------------: | --------------------------------------- |
|         0xB6          | 保留默认为 0（2Bytes）                  |
|         0xB7          | MAC地址（6Bytes）                       |
|         0xB8          | 自定义数据（可变长度，最大支持25Bytes） |

​	

​	

## 广播自定义数据

> 以下自定义数据格式仅适用于0xB8字段

​	

### 0x00 - 日常广播

0xB8字段自定义数据格式：

```
B8 + 00(日常广播) + [1B(数据类型) + nB(数据值)] + [1B(数据类型) + nB(数据值)] + ...
```

​	

数据类型表

| 类型值 | 长度（Byte） | 描述                                                         |
| ------ | ------------ | ------------------------------------------------------------ |
| 0x01   | 8            | **设备本地时间戳**（秒），与 **0x10** 同时开启则只展示占用最小字节数的类型 |
| 0x10   | 4            | **设备本地时间戳**（秒），与 **0x01** 同时开启则只展示占用最小字节数的类型 |
| 0x02   | 1            | **设备状态码**：<br />bit[0] - 佩戴检测支持（1 支持，0 不支持）<br />bit[1] - 佩戴状态（1 佩戴， 0 未佩戴）<br />bit[2] - 睡眠检测支持（1 支持，0 不支持）<br />bit[3] - 睡眠状态（1 睡眠中， 0 未睡眠）<br />bit[4] - 动静检测支持（1 支持，0 不支持）<br />bit[5] - 动静状态（1 活跃， 0 静止）<br />bit[6] - 保留<br />bit[7] - 保留 |
| 0x03   | 1            | **紧急求救状态码**：<br />bit[0] - SOS紧急求救支持（1 支持，0 不支持）<br />bit[1] - SOS求救状态（1 开启， 0 关闭）<br />bit[2] - 跌倒紧急求救支持（1 支持，0 不支持）<br />bit[3] - 跌倒求救状态（1 开启， 0 关闭）<br />bit[4] - 保留<br />bit[5] - 保留<br />bit[6] - 保留<br />bit[7] - 保留 |
| 0x04   | 1            | **电池状态**：<br />bit[6:0] - 电量百分比（0% ~ 100%）<br />bit[7]    - 充电状态（1 充电中，0 未充电） |
| 0x05   | 1            | **心率值**（bpm），最近一次测量结果                          |
| 0x06   | 1            | **血氧值**（%spo2），最近一次测量结果                        |
| 0x07   | 2            | **血压值**（mmgh），最近一次测量结果<br />1B(收缩压) + 1B(舒张压) |
| 0x08   | 2            | **体表温度** x100（16位有符号整数）                          |
| 0x09   | 2            | **环境温度** x100（16位有符号整数）                          |
| 0x0A   | 2            | **体核温度** x100（16位有符号整数）；受环境等因素影响，此数据值仅供参考 |
| 0x0B   | 4            | **气压值**（Pa）                                             |
| 0x0C   | 9            | **GNSS位置数据**：1B(状态) + 4B(纬度x1e6) + 4B(经度x1e6)<br />1B状态字节解析：<br />    bit[6:0] - 信号强度（0 ~ 100）<br />    bit[7]    - GNSS开关状态（0 关闭，1 开启） |
| 0x0D   | 3            | **步数**（step），全天累计步数                               |
| 0x0E   | 3            | **卡路里**（Kcal），全天累计卡路里                           |
| 0x0F   | 3            | **里程**（meter），全天累计里程                              |
| 0x11   | 20           | **HRV数据**：4B(SDNN x1000) + 4B(TP x1000) + 4B(LF x1000) + 4B(HF x1000) + 4B(VLF x1000) <br />（最近一次测量结果） |
| 0x12   | 4            | **HRV2数据**：1B(精神压力) + 1B(疲劳度) + 1B(抗压能力) + 1B(调节能力)<br />（最近一次测量结果） |



日常广播支持用户自定义配置展示数据，详情见 **终端蓝牙协议文档** 功能码0x0C
